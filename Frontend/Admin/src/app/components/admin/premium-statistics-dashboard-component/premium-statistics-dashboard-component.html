<section class="flex w-full min-h-screen bg-gray-50 dark:bg-gray-900 ">
  <div [ngClass]="{
        'fixed inset-0 z-50 transform transition-transform duration-300': isMobile(),
        '-translate-x-full': isMobile() && !isSidebarOpen,

        'w-7': !isSidebarOpen && !isMobile(),
        'w-60': isSidebarOpen || isMobile()
      }" class="bg-white dark:bg-gray-800 shadow-lg transition-all duration-300 flex-shrink-0">
    <app-sidebar [collapsed]="!isSidebarOpen"></app-sidebar>
  </div>

  <div *ngIf="isSidebarOpen && isMobile()" class="fixed inset-0 bg-black/40 z-40" (click)="toggleSidebar()"></div>

  <main [ngClass]="{
      'ml-0 w-full': isMobile(),
      'ml-9 w-[calc(100%-2rem)]': !isSidebarOpen && !isMobile(),   
      'ml-5 w-[calc(100%-14rem)]': isSidebarOpen && !isMobile()   
    }" class="flex flex-col transition-all duration-300  overflow-auto">

    <app-admin-header [isDarkMode]="isDarkMode" (toggleSidebarEvent)="toggleSidebar()"
      (toggleDarkModeEvent)="toggleDarkMode()">
    </app-admin-header>

        <div class="pl-3 pr-3">
            <!-- Summary Cards -->
        <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mt-4">
            <div
                class="bg-white dark:bg-gray-700 shadow p-4 rounded-lg flex items-center justify-between transform transition-transform duration-500 hover:scale-105 animate-fadeIn">
                <div>
                    <p class="text-gray-500 transition-colors duration-300">{{ tr('Total Premium Users') }}</p>
                    <p class="text-2xl font-bold transition-colors duration-300">{{ summary.totalUsers }}</p>
                </div>
                <i class="fas fa-users text-3xl text-blue-500 transition-colors duration-300"></i>
            </div>
            <div
                class="bg-white dark:bg-gray-700 shadow p-4 rounded-lg flex items-center justify-between transform transition-transform duration-500 hover:scale-105 animate-fadeIn delay-150">
                <div>
                    <p class="text-gray-500 transition-colors duration-300">{{ tr('Active Subscriptions') }}</p>
                    <p class="text-2xl font-bold transition-colors duration-300">{{ summary.activeSubscriptions }}</p>
                </div>
                <i class="fas fa-clock text-3xl text-yellow-500 transition-colors duration-300"></i>
            </div>
            <div
                class="bg-white dark:bg-gray-700 shadow p-4 rounded-lg flex items-center justify-between transform transition-transform duration-500 hover:scale-105 animate-fadeIn delay-300">
                <div>
                    <p class="text-gray-500 transition-colors duration-300">{{ tr('Total Revenue (USD)') }}</p>
                    <p class="text-2xl font-bold transition-colors duration-300">${{ summary.totalRevenue |
                        number:'1.2-2' }}</p>
                </div>
                <i class="fas fa-dollar-sign text-3xl text-green-500 transition-colors duration-300"></i>
            </div>
        </div>

        <!-- Distribution Cards -->
        <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mt-6">
            <div
                class="bg-gray-200 dark:bg-gray-600 p-4 rounded-lg text-center transform transition-transform duration-500 hover:scale-105 animate-fadeIn delay-400">
                {{ tr('Silver Members') }}: {{ distribution.silverMembers }}</div>
            <div
                class="bg-yellow-200 dark:bg-yellow-500 p-4 rounded-lg text-center transform transition-transform duration-500 hover:scale-105 animate-fadeIn delay-500">
                {{ tr('Gold Members') }}: {{ distribution.goldMembers }}</div>
            <div
                class="bg-purple-200 dark:bg-purple-500 p-4 rounded-lg text-center transform transition-transform duration-500 hover:scale-105 animate-fadeIn delay-600">
                {{ tr('Platinum Members') }}: {{ distribution.platinumMembers }}</div>
        </div>

        <!-- Users Table -->
        <div class="overflow-auto mt-6 animate-fadeIn delay-700">
            <table class="min-w-full bg-white dark:bg-gray-700 text-sm transition-colors duration-300">
                <thead>
                    <tr>
                        <th class="p-2">{{ tr('Username') }}</th>
                        <th class="p-2">{{ tr('Subscription Plan') }}</th>
                        <th class="p-2">{{ tr('Start Date') }}</th>
                        <th class="p-2">{{ tr('End Date') }}</th>
                        <th class="p-2">{{ tr('Status') }}</th>
                        <th class="p-2">{{ tr('Total Paid (USD)') }}</th>
                        <th class="p-2">{{ tr('Diamonds') }}</th>
                    </tr>
                </thead>
                <tbody>
                    <tr *ngFor="let user of users" [ngClass]="{
                        'bg-green-100 dark:bg-green-600': user.status === 'Active',
                        'bg-orange-100 dark:bg-orange-600': user.status === 'Expired',
                        'bg-yellow-100 dark:bg-yellow-600': user.status === 'Upcoming'
                    }" class="transition-colors duration-300 transform hover:scale-[1.01]">
                        <td class="p-2">{{ user.username }}</td>
                        <td class="p-2">{{ user.subscriptionPlan }}</td>
                        <td class="p-2">{{ user.startDate }}</td>
                        <td class="p-2">{{ user.endDate }}</td>
                        <td class="p-2">{{ user.status }}</td>
                        <td class="p-2">${{ user.totalPaid | number:'1.2-2' }}</td>
                        <td class="p-2">{{ user.diamonds }}</td>
                    </tr>
                </tbody>
            </table>
        </div>
        </div>

    </main>
</section>