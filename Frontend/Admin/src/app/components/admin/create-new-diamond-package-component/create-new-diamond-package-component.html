<section class="flex w-full min-h-screen bg-gray-50 dark:bg-gray-900 ">
    <div [ngClass]="{
        'fixed inset-0 z-50 transform transition-transform duration-300': isMobile(),
        '-translate-x-full': isMobile() && !isSidebarOpen,

        'w-7': !isSidebarOpen && !isMobile(),
        'w-60': isSidebarOpen || isMobile()
      }" class="bg-white dark:bg-gray-800 shadow-lg transition-all duration-300 flex-shrink-0">
        <app-sidebar [collapsed]="!isSidebarOpen"></app-sidebar>
    </div>

    <div *ngIf="isSidebarOpen && isMobile()" class="fixed inset-0 bg-black/40 z-40" (click)="toggleSidebar()"></div>

    <main [ngClass]="{
      'ml-0 w-full': isMobile(),
      'ml-9 w-[calc(100%-2rem)]': !isSidebarOpen && !isMobile(),   
      'ml-5 w-[calc(100%-14rem)]': isSidebarOpen && !isMobile()   
    }" class="flex flex-col transition-all duration-300  overflow-auto">

        <app-admin-header [isDarkMode]="isDarkMode" (toggleSidebarEvent)="toggleSidebar()"
            (toggleDarkModeEvent)="toggleDarkMode()">
        </app-admin-header>
        <div class="p-6 bg-white dark:bg-gray-800 shadow rounded-lg max-w-lg mx-auto mt-6">

            <!-- Form Container -->
            <div class="p-6 bg-white dark:bg-gray-800 shadow rounded-lg w-full max-w-4xl mx-auto mt-6">

                <h2 class="text-2xl font-bold mb-4 text-gray-800 dark:text-white">
                    {{ tr('ADD_NEW_OFFER') }}
                </h2>

                <form [formGroup]="form" (ngSubmit)="save()" class="space-y-4">

                    <!--Title -->
                    <div>
                        <label class="block text-sm mb-1 text-gray-600 dark:text-gray-300">
                            {{ tr('TITLE') }}
                        </label>

                        <input formControlName="title"
                            class="w-full p-2 rounded border dark:bg-gray-700 dark:text-white" />

                        <ng-container *ngIf="form.get('title')?.touched && form.get('title')?.invalid">

                            <div *ngIf="form.get('title')?.errors?.['required']" class="text-red-500 text-sm">
                                {{ tr('REQUIRED') }}
                            </div>

                            <div *ngIf="form.get('title')?.errors?.['maxlength']" class="text-red-500 text-sm">
                                {{ tr('TITLE_TOO_LONG') }}
                            </div>

                            <div *ngIf="form.get('title')?.errors?.['invalidStart']" class="text-red-500 text-sm">
                                {{ form.get('title')?.errors?.['invalidStart'] }}
                            </div>

                            <div *ngIf="form.get('title')?.errors?.['duplicate']" class="text-red-500 text-sm">
                                {{ tr('OFFER_ALREADY_EXISTS') }}
                            </div>

                        </ng-container>
                    </div>

                    <!-- Diamond Amount -->
                    <div>
                        <label class="block text-sm mb-1 text-gray-600 dark:text-gray-300">
                            {{ tr('DIAMOND_AMOUNT') }}
                        </label>

                        <input type="number" formControlName="diamondAmount"
                            class="w-full p-2 rounded border dark:bg-gray-700 dark:text-white" />

                        <ng-container *ngIf="form.get('diamondAmount')?.touched && form.get('diamondAmount')?.invalid">

                            <div *ngIf="form.get('diamondAmount')?.errors?.['required']" class="text-red-500 text-sm">
                                {{ tr('REQUIRED') }}
                            </div>

                            <div *ngIf="form.get('diamondAmount')?.errors?.['pattern']" class="text-red-500 text-sm">
                                {{ tr('DIAMOND_AMOUNT_INVALID') }}
                            </div>

                            <div *ngIf="form.get('diamondAmount')?.errors?.['max']" class="text-red-500 text-sm">
                                {{ tr('DIAMOND_AMOUNT_MAX') }}
                            </div>

                        </ng-container>
                    </div>

                    <!-- Price -->
                    <div>
                        <label class="block text-sm mb-1 text-gray-600 dark:text-gray-300">
                            {{ tr('PRICE') }}
                        </label>

                        <input type="number" formControlName="price"
                            class="w-full p-2 rounded border dark:bg-gray-700 dark:text-white" />

                        <ng-container *ngIf="form.get('price')?.touched && form.get('price')?.invalid">

                            <div *ngIf="form.get('price')?.errors?.['required']" class="text-red-500 text-sm">
                                {{ tr('REQUIRED') }}
                            </div>

                            <div *ngIf="form.get('price')?.errors?.['pattern']" class="text-red-500 text-sm">
                                {{ tr('PRICE_INVALID') }}
                            </div>

                            <div *ngIf="form.get('price')?.errors?.['max']" class="text-red-500 text-sm">
                                {{ tr('PRICE_MAX') }}
                            </div>

                        </ng-container>
                    </div>

                    <!-- Currency -->
                    <div>
                        <label class="block text-sm mb-1 text-gray-600 dark:text-gray-300">
                            {{ tr('CURRENCY') }}
                        </label>

                        <select formControlName="currency"
                            class="w-full p-2 rounded border dark:bg-gray-700 dark:text-white">
                            <option value="USD">USD</option>
                            <option value="EGP">EGP</option>
                            <option value="SAR">SAR</option>
                        </select>

                        <ng-container *ngIf="form.get('currency')?.touched && form.get('currency')?.invalid">

                            <div *ngIf="form.get('currency')?.errors?.['required']" class="text-red-500 text-sm">
                                {{ tr('REQUIRED') }}
                            </div>

                            <div *ngIf="form.get('currency')?.errors?.['pattern']" class="text-red-500 text-sm">
                                {{ tr('CURRENCY_INVALID') }}
                            </div>

                        </ng-container>
                    </div>

                    <!-- Submit -->
                    <button type="submit"
                        class="bg-blue-600 text-white w-full py-2 rounded hover:bg-blue-700 transition">
                        {{ tr('SAVE') }}
                    </button>

                </form>
            </div>
        </div>
    </main>
</section>