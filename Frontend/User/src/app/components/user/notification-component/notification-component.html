<div class="relative">

  <!-- Notification Icon -->
  <div class="relative cursor-pointer text-2xl" (click)="toggleNotifications()">
    <i class="fa fa-bell"></i>

    <!-- Unread Badge -->
    <span *ngIf="unreadCount > 0"
          class="absolute -top-2 -right-2 bg-red-600 text-white rounded-full text-xs font-bold px-1.5">
      {{ unreadCount }}
    </span>
  </div>

  <!-- Notification Dropdown -->
  <div *ngIf="showNotifications"
       class="absolute top-full mt-2 right-0 w-96 max-h-[480px] bg-white rounded-2xl shadow-xl z-50 p-3 flex flex-col">

    <!-- Header with Mark All Read -->
    <div class="flex justify-end mb-3">
      <button (click)="markAll()" 
              class="text-gray-500 hover:text-green-600 transition-colors duration-200" 
              title="Mark all as read">
        <i class="fa fa-check-circle text-xl"></i>
      </button>
    </div>

    <!-- Notification List -->
    <div class="flex-1 overflow-y-auto no-scrollbar">
      <div *ngFor="let n of notifications"
           (click)="markAsReadOnly(n)"
           class="flex items-start gap-3 p-3 mb-2 rounded-xl hover:bg-gray-50 cursor-pointer transition-colors duration-200 shadow-sm">

        <!-- Dot indicator -->
        <span class="w-3 h-3 rounded-full mt-1.5"
              [ngClass]="!n.isRead ? 'bg-blue-600' : 'bg-gray-300'"></span>

        <div class="flex-1 text-left">
          <h4 [ngClass]="!n.isRead ? 'font-semibold text-gray-900' : 'font-normal text-gray-600'">
            {{ n.title }}
          </h4>
          <!-- <p class="text-sm text-gray-500">{{ n.details }}</p> -->
           <div class="text-sm text-gray-500" [innerHTML]="n.details"></div>

          <small class="text-xs text-gray-400">{{ n.createdAt | date:'short' }}</small>
        </div>
      </div>
    </div>

  </div>
</div>
