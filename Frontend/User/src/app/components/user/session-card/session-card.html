<!-- Session Card Container -->
<div class="w-full mb-4 px-2 sm:px-4 lg:px-8">
  <div class="group bg-white rounded-2xl border border-border p-4 sm:p-5 shadow-card transition-all duration-300 hover:shadow-lg hover:border-primary/20 w-full dark:bg-gray-800">

    <!-- Header: Title + Status -->
    <div class="flex flex-col sm:flex-row items-start sm:items-center justify-between gap-2 mb-4 dark:bg-gray-800">
      <div class="flex-1 min-w-0">
        <h3 class="font-semibold text-lg sm:text-xl text-foreground truncate group-hover:text-blue-600 transition-colors">
          {{ session.sessionTitle }}
        </h3>
      </div>
      <span class="inline-flex items-center gap-1.5 px-3 py-1 rounded-full text-xs sm:text-sm font-medium border shrink-0"
        [ngClass]="{
          'bg-green-100 text-green-600 border-green-200': session.status === 'Ongoing',
          'bg-yellow-100 text-yellow-600 border-yellow-200': session.status === 'Scheduled',
          'bg-gray-100 text-gray-600 border-gray-200': session.status === 'Completed'
        }">
        <span class="w-2 h-2 rounded-full"
          [ngClass]="{
            'bg-green-500 animate-pulse': session.status === 'Ongoing',
            'bg-yellow-500': session.status === 'Scheduled',
            'bg-gray-500': session.status === 'Completed'
          }"></span>
        {{ session.status }}
      </span>
    </div>

    <!-- Details --> 
    <div class="space-y-2 mb-4 dark:bg-gray-800">

      <!-- With -->
      <div class="flex items-center gap-3 text-sm sm:text-base">
        <div class="flex items-center justify-center w-8 h-8 rounded-lg bg-secondary">
          <svg class="w-4 h-4 text-secondary-foreground" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
            <path d="M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"></path>
            <circle cx="12" cy="7" r="4"></circle>
          </svg>
        </div>
        <div>
          <span class="text-muted-foreground text-xs sm:text-sm">{{tr('With')}}</span>
          <p class="text-foreground font-medium truncate">{{ session.otherUserFullName }}</p>
        </div>
      </div>

      <!-- Skill -->
      <div class="flex items-center gap-3 text-sm sm:text-base">
        <div class="flex items-center justify-center w-8 h-8 rounded-lg bg-secondary">
          <svg class="w-4 h-4 text-secondary-foreground" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
            <path d="M12 7v14"></path>
            <path d="M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z"></path>
          </svg>
        </div>
        <div>
          <span class="text-muted-foreground text-xs sm:text-sm">{{tr('Skill')}}</span>
          <p class="text-foreground font-medium truncate">{{ session.skillName }}</p>
        </div>
      </div>

      <!-- Schedule -->
      <div class="flex flex-wrap gap-4 text-xs sm:text-sm text-muted-foreground pt-1">
        <span class="flex items-center gap-1.5">
          <svg class="h-4 w-4 text-primary" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
            <path d="M8 2v4"></path>
            <path d="M16 2v4"></path>
            <rect width="18" height="18" x="3" y="4" rx="2"></rect>
            <path d="M3 10h18"></path>
          </svg>
          {{ session.scheduleStartEgypt | date:'mediumDate' }}
        </span>
        <span class="flex items-center gap-1.5">
          <svg class="h-4 w-4 text-primary" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
            <circle cx="12" cy="12" r="10"></circle>
            <polyline points="12 6 12 12 16 14"></polyline>
          </svg>
          {{ session.scheduleStartEgypt | date:'shortTime' }} - {{ session.scheduleEndEgypt | date:'shortTime' }}
        </span>
      </div>

    </div>

    <!-- Buttons -->
    <div class="flex flex-wrap items-center gap-2 pt-3 border-t border-border">

      <!-- Join -->
      <button *ngIf="session.status === 'Ongoing'" (click)="onJoin()"
        class="inline-flex items-center gap-1.5 rounded-md text-xs sm:text-sm h-8 px-3 py-1.5 bg-emerald-600 hover:bg-emerald-700 text-primary-foreground">
        <svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
          <path d="m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5"></path>
          <rect x="2" y="6" width="14" height="12" rx="2"></rect>
        </svg>
        {{tr('Join')}}
      </button>

      <!-- Edit -->
      <button *ngIf="canEdit(currentFilter)" (click)="onEdit()"
        class="inline-flex items-center gap-1.5 rounded-md text-xs sm:text-sm h-8 px-3 py-1.5 bg-blue-600 hover:bg-blue-700 text-white">
        <svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
          <path d="M16.5 3.5a2.121 2.121 0 1 1 3 3L7 19l-4 1 1-4L16.5 3.5z"></path>
        </svg>
        {{tr('Edit')}}
      </button>

      <!-- Delete -->
      <button *ngIf="canDelete(currentFilter)" (click)="onDelete()"
        class="inline-flex items-center gap-1.5 rounded-md text-xs sm:text-sm h-8 px-3 py-1.5 bg-destructive text-destructive-foreground hover:bg-destructive/90">
        <svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
          <path d="M3 6h18"></path>
          <path d="M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"></path>
          <path d="M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"></path>
          <line x1="10" y1="11" x2="10" y2="17"></line>
          <line x1="14" y1="11" x2="14" y2="17"></line>
        </svg>
        {{tr('Delete')}}
      </button>

      <!-- Feedback -->
      <button *ngIf="session.status.toLowerCase() === 'completed'" (click)="openFeedbackModal(session.sessionId)"
        class="inline-flex items-center gap-1.5 rounded-md text-xs sm:text-sm h-8 px-3 py-1.5 bg-gray-300 hover:bg-gray-400 text-gray-800 dark:bg-gray-800">
        <svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
          <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2z"></path>
        </svg>
        {{tr('Feedback')}}
      </button>

    </div>

  </div>
</div>
