<div [ngClass]="{
        'fixed top-0 left-0 z-50 h-screen  transition-transform duration-300': true,
        '-translate-x-full': isMobile() && !isSidebarOpen,
        'translate-x-0': isSidebarOpen
      }" [style.width.px]="isSidebarOpen ? 240 : 56" class="bg-white dark:bg-gray-800 shadow-lg">
  <app-sidestudent [collapsed]="!isSidebarOpen"></app-sidestudent>
</div>

<section class="diamona">
  <div *ngIf="isSidebarOpen && isMobile()" class="fixed inset-0 bg-black/40 z-40" (click)="toggleSidebar()"></div>

<main [ngStyle]="{'margin-left.px': isSidebarOpen && !isMobile() ? 240 : 56}"
  class="flex flex-col transition-all duration-300 overflow-auto min-h-screen">
  <app-user-header [isDarkMode]="isDarkMode" (toggleSidebarEvent)="toggleSidebar()"
    (toggleDarkModeEvent)="toggleDarkMode()"></app-user-header>

<!-- Container ÙƒØ§Ù…Ù„ Ù„ØªÙˆØ³ÙŠØ· Ø§Ù„Ù…ÙˆØ¯Ø§Ù„ -->
<div class="fixed inset-0 flex items-center justify-center">
    <!-- Ø¬Ø²Ø¡ Ø®Ù„Ù Ø§Ù„Ù…ÙˆØ¯Ø§Ù„ ÙÙ‚Ø· -->
    <div class="absolute inset-0 bg-black bg-opacity-40 dark:bg-opacity-60" (click)="closeModal()"></div>

    <!-- Ø§Ù„Ù…ÙˆØ¯Ø§Ù„ Ù†ÙØ³Ù‡ -->
    <div class="relative bg-white dark:bg-gray-800 rounded-2xl shadow-2xl p-6 w-80 animate-fadeIn z-50"
        (click)="$event.stopPropagation()">

        <!-- Diamond Icon -->
        <div class="flex justify-center mb-4">
            <span class="text-6xl text-blue-400">ðŸ’Ž</span>
        </div>

        <!-- Title -->
        <h2 class="text-center text-black dark:text-white font-bold text-xl mb-2">
            {{ tr('YOUR_DIAMONDS') }}
        </h2>

        <!-- User Points -->
        <p class="text-center text-gray-700 dark:text-gray-300 text-lg mb-4">
            {{ userPoints?.totalPoints || 0 }} ðŸ’Ž
        </p>

        <!-- Packages List -->
        <div class="space-y-3">
            <div *ngFor="let pkg of packages">
                <button (click)="goToPayment(pkg.diamondPackageId)"
                    class="w-full bg-blue-700 hover:bg-blue-800 transition-all duration-200 text-white py-3 rounded-xl font-semibold shadow-md">
                    {{ tr('BUY') }} {{ pkg.diamondAmount }} {{ tr('DIAMONDS') }}
                    â€” {{ pkg.price }}$
                </button>
            </div>
        </div>

        <!-- Footer Text -->
        <p class="text-center text-gray-500 dark:text-gray-300 text-sm mt-5">
            {{ tr('BOOST_YOUR_CAREER') }}
        </p>
    </div>
</div>
</main>
</section>
<style>
    .animate-fadeIn {
        animation: fadeIn 0.35s ease-in-out;
    }

    @keyframes fadeIn {
        from {
            opacity: 0;
            transform: translateY(10px);
        }

        to {
            opacity: 1;
            transform: translateY(0);
        }
    }
</style>